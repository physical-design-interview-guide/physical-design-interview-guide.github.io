<header class="site-header" id="masthead" role="banner">

  <!-- Branding -->
  <div class="site-branding">
    <div id="header-inner">
      <a class="logo-link" href="{{ .Site.BaseURL }}">
        <img class="header-logo"
             src="{{ .Site.Params.logo }}"
             alt="{{ .Site.Title }} Logo"
             width="80" height="80"
             fetchpriority="high"/>
      </a>
      <div class="titlewrapper">
        {{ if .IsHome }}
          <h1 class="site-title"><a href="{{ .Site.BaseURL }}">{{ .Site.Title }}</a></h1>
        {{ else }}
          <p class="site-title"><a href="{{ .Site.BaseURL }}">{{ .Site.Title }}</a></p>
        {{ end }}
        <p class="site-description">{{ .Site.Params.description }}</p>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="main-navigation" id="site-navigation" role="navigation">

    <!-- Mobile hamburger (shown only on small screens) -->
    <button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">â˜°</button>

    <!-- nav-inner: border wraps ONLY around this box â€” pills + toggle + search -->
    <div class="nav-inner">

      <!-- Tab pills -->
      <ul id="primary-menu">
        {{ range .Site.Menus.main }}
          <li{{ if $.IsMenuCurrent "main" . }} class="current"{{ end }}>
            <a href="{{ .URL }}">{{ .Name }}</a>
          </li>
        {{ end }}
      </ul>

      <!-- Dark/light toggle â€” inside the border, right after pills -->
      <button class="theme-toggle"
              aria-label="Toggle dark mode"
              onclick="window.toggleTheme && window.toggleTheme()"
              type="button">
        <span class="sun" aria-hidden="true">â˜€ï¸</span>
        <span class="moon" aria-hidden="true">ğŸŒ™</span>
      </button>

      <!-- Search icon â€” inside the border -->
      <button class="search-toggle" aria-label="Search" type="button">ğŸ”</button>

    </div><!-- .nav-inner -->
  </nav>

  <!-- Search box (slides open below nav when icon clicked) -->
  <div class="search-box-wrapper" id="search-container">
    <form action="/search/" method="get" role="search">
      <input type="search" name="q" id="search-input" placeholder="Search posts..." aria-label="Search"/>
      <button type="submit">Search</button>
    </form>
  </div>

</header>
